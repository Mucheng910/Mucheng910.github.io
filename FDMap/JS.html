<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS | 个人主页</title>
    <meta name="description" content="🙅‍♀ ️">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
  <link rel="apple-touch-icon" href="/images/photo.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.019fe3db.css" as="style"><link rel="preload" href="/assets/js/app.08e121f0.js" as="script"><link rel="preload" href="/assets/js/2.9b2c206e.js" as="script"><link rel="preload" href="/assets/js/9.a9a34424.js" as="script"><link rel="prefetch" href="/assets/js/10.9d85fd93.js"><link rel="prefetch" href="/assets/js/11.f3dbfea6.js"><link rel="prefetch" href="/assets/js/12.d6f42a33.js"><link rel="prefetch" href="/assets/js/13.0c7a6aab.js"><link rel="prefetch" href="/assets/js/14.379d5681.js"><link rel="prefetch" href="/assets/js/15.a795006f.js"><link rel="prefetch" href="/assets/js/16.d65d283d.js"><link rel="prefetch" href="/assets/js/17.265fbf75.js"><link rel="prefetch" href="/assets/js/18.730f1630.js"><link rel="prefetch" href="/assets/js/19.905bc299.js"><link rel="prefetch" href="/assets/js/20.7046d84e.js"><link rel="prefetch" href="/assets/js/21.abf3fa17.js"><link rel="prefetch" href="/assets/js/22.21efee47.js"><link rel="prefetch" href="/assets/js/23.7eb77dc1.js"><link rel="prefetch" href="/assets/js/24.f5af4b3a.js"><link rel="prefetch" href="/assets/js/25.cbde6c41.js"><link rel="prefetch" href="/assets/js/26.fdacd15c.js"><link rel="prefetch" href="/assets/js/3.b6959132.js"><link rel="prefetch" href="/assets/js/4.1ff495fc.js"><link rel="prefetch" href="/assets/js/5.9aadbdc1.js"><link rel="prefetch" href="/assets/js/6.c092145a.js"><link rel="prefetch" href="/assets/js/7.70cfcfc9.js"><link rel="prefetch" href="/assets/js/8.b55986c0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.019fe3db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/FDMap/" class="nav-link router-link-active">前端基础</a></div><div class="nav-item"><a href="/liCoding/" class="nav-link">手撕代码</a></div><div class="nav-item"><a href="/FDModule/" class="nav-link">设计模式</a></div><div class="nav-item"><a href="https://github.com/Mucheng910" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/FDMap/" class="nav-link router-link-active">前端基础</a></div><div class="nav-item"><a href="/liCoding/" class="nav-link">手撕代码</a></div><div class="nav-item"><a href="/FDModule/" class="nav-link">设计模式</a></div><div class="nav-item"><a href="https://github.com/Mucheng910" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FDMap/" class="sidebar-link">HTML</a></li><li><a href="/FDMap/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/FDMap/JS.html" class="active sidebar-link">JS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#数据类型" class="sidebar-link">数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#基本数据类型" class="sidebar-link">基本数据类型</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#引用数据类型：object" class="sidebar-link">引用数据类型：Object</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#数据，内存，变量" class="sidebar-link">数据，内存，变量</a></li></ul></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#判断数据类型" class="sidebar-link">判断数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#typeof" class="sidebar-link">typeof</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#instanceof" class="sidebar-link">instanceof</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#" class="sidebar-link">===</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#万能的判断" class="sidebar-link">万能的判断</a></li></ul></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#var-let-const" class="sidebar-link">var let const</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#使用es5实现let" class="sidebar-link">使用es5实现let</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#var-let-var-之间的区别" class="sidebar-link">var let var 之间的区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#js内置对象属性和方法汇总" class="sidebar-link">js内置对象属性和方法汇总</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#array" class="sidebar-link">Array</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#数组方法改变原数组：" class="sidebar-link">数组方法改变原数组：</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#不改变原数组：" class="sidebar-link">不改变原数组：</a></li></ul></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#object" class="sidebar-link">Object</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#object遍历方法" class="sidebar-link">Object遍历方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#function" class="sidebar-link">function</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#变量对象的创建过程" class="sidebar-link">变量对象的创建过程</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#js内存泄漏" class="sidebar-link">js内存泄漏</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#es6-weakmap" class="sidebar-link">ES6 WeakMap</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#js函数式编程指南" class="sidebar-link">js函数式编程指南</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#回调函数" class="sidebar-link">回调函数</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#立即调用的函数表达式（iife）-匿名函数自调用" class="sidebar-link">立即调用的函数表达式（IIFE）(匿名函数自调用)</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#this指向" class="sidebar-link">this指向</a></li></ul></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#原型" class="sidebar-link">原型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#原型链" class="sidebar-link">原型链</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#new" class="sidebar-link">new</a></li></ul></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#继承" class="sidebar-link">继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#es5继承：" class="sidebar-link">ES5继承：</a></li></ul></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#跨域" class="sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/JS.html#jsonp" class="sidebar-link">Jsonp</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#cors" class="sidebar-link">CORS</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#document-domain" class="sidebar-link">document.domain</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#nginx" class="sidebar-link">nginx</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#websocket" class="sidebar-link">webSocket</a></li><li class="sidebar-sub-header"><a href="/FDMap/JS.html#访问跨域的页面" class="sidebar-link">访问跨域的页面</a></li></ul></li></ul></li><li><a href="/FDMap/DOM.html" class="sidebar-link">Dom</a></li><li><a href="/FDMap/BOM.html" class="sidebar-link">BOM</a></li><li><a href="/FDMap/ES6.html" class="sidebar-link">ES6</a></li><li><a href="/FDMap/webWorker.html" class="sidebar-link">web Worker</a></li><li><a href="/FDMap/webSocket.html" class="sidebar-link">web Socket</a></li><li><a href="/FDMap/serviceWorker.html" class="sidebar-link">service worker</a></li><li><a href="/FDMap/PWA.html" class="sidebar-link">PWA</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js"><a href="#js" aria-hidden="true" class="header-anchor">#</a> JS</h1> <h2 id="数据类型"><a href="#数据类型" aria-hidden="true" class="header-anchor">#</a> 数据类型</h2> <h3 id="基本数据类型"><a href="#基本数据类型" aria-hidden="true" class="header-anchor">#</a> 基本数据类型</h3> <p>基本类型有六种： <code>null</code>，<code>undefined</code>，<code>boolean</code>，<code>number</code>，<code>string</code>，<code>symbol</code></p> <blockquote><p>保存的是基本类型数据，基本类型的变量是存放在栈内存（Stack）里的</p></blockquote> <p><code>undefined</code> 定义了但未赋值</p> <p><code>null</code> 定义并赋值了 值为null <code>var b= null</code> 初始赋值为null 表示后来要赋值为object  最后 <code>b=null</code>释放内存<strong>让b指向的对象为垃圾对象</strong></p> <h3 id="引用数据类型：object"><a href="#引用数据类型：object" aria-hidden="true" class="header-anchor">#</a> 引用数据类型：<code>Object</code></h3> <p>细分<em>有：</em><code>Object 类型</code><em>、</em><code>Array 类型</code><em>、</em><code>Date 类型</code><em>、</em><code>RegExp 类型</code><em>、</em><code>Function 类型</code> <em>等。</em></p> <blockquote><p>保存的是地址值，引用类型的值是保存在堆内存（Heap）中的对象（Object）</p></blockquote> <p>需要进行深拷贝的数据类型是<strong>Date</strong>和<strong>Object</strong></p> <h3 id="数据，内存，变量"><a href="#数据，内存，变量" aria-hidden="true" class="header-anchor">#</a> 数据，内存，变量</h3> <p>数据：存储在内存中，代表特定信息，本质上是0101</p> <p>内存：通电后产生可存储数据的空间(临时)</p> <p>变量：每个变量对应一小块内存，变量名用来查找对应内存，变量值是内存中的数据</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj1<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">'Tom'</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> obj2<span class="token operator">=</span>obj1
obj2<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">12</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token comment">//12</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'A'</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token comment">//A</span>
<span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> b<span class="token operator">=</span><span class="token number">2</span>
a<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">'BoB'</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token number">13</span><span class="token punctuation">}</span>
b<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">14</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>age<span class="token punctuation">,</span>a<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token comment">//14 BoB 13</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 obj<span class="token operator">=</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token comment">//13 a的指针没有变</span>

<span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">2</span>
<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token operator">=</span>a<span class="token operator">+</span><span class="token number">2</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> a
<span class="token punctuation">}</span>
<span class="token function">fn2</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">//2 fn(a)函数内存</span>
</code></pre></div><h2 id="判断数据类型"><a href="#判断数据类型" aria-hidden="true" class="header-anchor">#</a> 判断数据类型</h2> <h3 id="typeof"><a href="#typeof" aria-hidden="true" class="header-anchor">#</a> typeof</h3> <p>返回数据类型的<code>字符串表达式</code>  undefined/数字/字符串/布尔值/function/symbol</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> <span class="token number">NaN</span>  <span class="token string">'number'</span>
<span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token string">'object'</span>
<span class="token keyword">typeof</span> array <span class="token string">'object'</span>
<span class="token keyword">typeof</span> object <span class="token string">'object'</span>
</code></pre></div><p>不能判断 null -&gt; object /array-&gt;object /object-&gt;object</p> <h3 id="instanceof"><a href="#instanceof" aria-hidden="true" class="header-anchor">#</a> instanceof</h3> <p><code>instanceof</code> 可以正确判断对象的类型，因为内部机制是通过判断对象的原型链中是不是找到类型<code>prototype</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token keyword">instanceof</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获得类型的原型</span>
    <span class="token keyword">let</span> prototype <span class="token operator">=</span> right<span class="token punctuation">.</span>prototype
    <span class="token comment">// 获得对象的原型</span>
    left <span class="token operator">=</span> left<span class="token punctuation">.</span>__proto__
    <span class="token comment">// 判断对象的类型是否等于类型的原型</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    		<span class="token keyword">return</span> <span class="token boolean">false</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>prototype <span class="token operator">===</span> left<span class="token punctuation">)</span>
    		<span class="token keyword">return</span> <span class="token boolean">true</span>
    	left <span class="token operator">=</span> left<span class="token punctuation">.</span>__proto__
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//和上边的一样但操作__proto__不安全容易造成原型链污染可以使用Object原型方法</span>
<span class="token keyword">function</span> <span class="token function">instanceof2</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> prototype <span class="token operator">=</span> right<span class="token punctuation">.</span>prototype
    left <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    		<span class="token keyword">return</span> <span class="token boolean">false</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>prototype <span class="token operator">===</span> left<span class="token punctuation">)</span>
    		<span class="token keyword">return</span> <span class="token boolean">true</span>
    	left <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> b1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  b2<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'abc'</span><span class="token punctuation">,</span>console<span class="token punctuation">.</span>log<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function-variable function">b3</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b3'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span>b2 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">,</span>b1<span class="token punctuation">.</span>b2 <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token comment">//true true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span>b3 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">,</span>b1<span class="token punctuation">.</span>b3 <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token comment">//true true</span>
<span class="token comment">// b1 ：是实例对象； Object： 是构造函数</span>
</code></pre></div><h3 id=""><a href="#" aria-hidden="true" class="header-anchor">#</a> ===</h3> <p>可以判断undefined/null</p> <h3 id="万能的判断"><a href="#万能的判断" aria-hidden="true" class="header-anchor">#</a> 万能的判断</h3> <p><code>Object.prototype.toString.call(xx)</code>。这样我们就可以获得类似 <code>[object Type]</code>的字符串</p> <h2 id="var-let-const"><a href="#var-let-const" aria-hidden="true" class="header-anchor">#</a> var let const</h2> <h3 id="使用es5实现let"><a href="#使用es5实现let" aria-hidden="true" class="header-anchor">#</a> 使用es5实现let</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//var 实现 let for循环</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 55555</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 01234</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> i
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 01234</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 01234</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 01234</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">f1</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 01234</span>
</code></pre></div><h3 id="var-let-var-之间的区别"><a href="#var-let-var-之间的区别" aria-hidden="true" class="header-anchor">#</a> var let var 之间的区别</h3> <p>全局作用域let，const 去哪里了？</p> <blockquote><p>函数的内部属性<code>[[Scopes]]</code>中找到了</p></blockquote> <p>var在window对象上可以访问到 let和const 在window哪里访问？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token comment">//1</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token comment">// typeError</span>
<span class="token keyword">function</span> <span class="token function">findB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token function">findB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//1</span>
window<span class="token punctuation">.</span><span class="token function-variable function">clgA</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">clgA</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 1</span>
window<span class="token punctuation">.</span>clgA <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//1</span>
</code></pre></div><h2 id="js内置对象属性和方法汇总"><a href="#js内置对象属性和方法汇总" aria-hidden="true" class="header-anchor">#</a> js内置对象属性和方法汇总</h2> <p>JavaScript有3大对象，分别是<code>本地对象</code>、<code>内置对象</code>和<code>宿主对象</code>。</p> <ul><li>本地对象
<ul><li>与宿主无关，独立于宿主环境的ECMAScript实现提供的对象。</li> <li>简单来说，本地对象就是 ECMA-262 定义的类（引用类型）。</li> <li>这些引用类型在运行过程中需要通过new来创建所需的实例对象。</li> <li>包含：<code>Object</code>、<code>Array</code>、<code>Date</code>、<code>RegExp</code>、<code>Function</code>、<code>Boolean</code>、<code>Number</code>、<code>String</code>等。</li></ul></li> <li>内置对象
<ul><li>与宿主无关，独立于宿主环境的ECMAScript实现提供的对象。</li> <li>在 ECMAScript 程序开始执行前就存在，本身就是实例化内置对象，开发者无需再去实例化。</li> <li>内置对象是本地对象的子集。</li> <li>包含：<code>Global</code>和<code>Math</code>。</li> <li>ECMAScript5中增添了<code>JSON</code>这个存在于全局的内置对象。</li></ul></li> <li>宿主对象
<ul><li>由 ECMAScript 实现的宿主环境提供的对象，包含两大类，一个是宿主提供，一个是自定义类对象。</li> <li>所有非本地对象都属于宿主对象。</li> <li>对于嵌入到网页中的JS来说，其宿主对象就是浏览器提供的对象，浏览器对象有很多，如<code>Window</code>和<code>Document</code>等。</li> <li>所有的<code>DOM</code>和<code>BOM</code>对象都属于宿主对象。</li></ul></li></ul> <h2 id="array"><a href="#array" aria-hidden="true" class="header-anchor">#</a> Array</h2> <table><thead><tr><th style="text-align:left;">方法</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-concat-array.html" target="_blank" rel="noopener noreferrer">concat()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">连接两个或更多的数组，并返回结果。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-copywithin.html" target="_blank" rel="noopener noreferrer">copyWithin()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">从数组的指定位置拷贝元素到数组的另一个指定位置中。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-entries.html" target="_blank" rel="noopener noreferrer">entries()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">返回数组的可迭代对象。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-every.html" target="_blank" rel="noopener noreferrer">every()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">检测数值元素的每个元素是否都符合条件。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-fill.html" target="_blank" rel="noopener noreferrer">fill()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">使用一个固定值来填充数组。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-filter.html" target="_blank" rel="noopener noreferrer">filter()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">检测数值元素，并返回符合条件所有元素的数组。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-find.html" target="_blank" rel="noopener noreferrer">find()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">返回符合传入测试（函数）条件的数组元素。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-findindex.html" target="_blank" rel="noopener noreferrer">findIndex()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">返回符合传入测试（函数）条件的数组元素索引。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-foreach.html" target="_blank" rel="noopener noreferrer">forEach()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">数组每个元素都执行一次回调函数。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-from.html" target="_blank" rel="noopener noreferrer">from()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">通过给定的对象中创建一个数组。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-includes.html" target="_blank" rel="noopener noreferrer">includes()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">判断一个数组是否包含一个指定的值。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-indexof-array.html" target="_blank" rel="noopener noreferrer">indexOf()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">搜索数组中的元素，并返回它所在的位置。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-isarray.html" target="_blank" rel="noopener noreferrer">isArray()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">判断对象是否为数组。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-join.html" target="_blank" rel="noopener noreferrer">join()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">把数组的所有元素放入一个字符串。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-keys.html" target="_blank" rel="noopener noreferrer">keys()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">返回数组的可迭代对象，包含原始数组的键(key)。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-lastindexof-array.html" target="_blank" rel="noopener noreferrer">lastIndexOf()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">返回一个指定的字符串值最后出现的位置，在一个字符串中的指定位置从后向前搜索。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-map.html" target="_blank" rel="noopener noreferrer">map()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">通过指定函数处理数组的每个元素，并返回处理后的数组。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-pop.html" target="_blank" rel="noopener noreferrer">pop()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">删除数组的最后一个元素并返回删除的元素。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-push.html" target="_blank" rel="noopener noreferrer">push()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">向数组的末尾添加一个或更多元素，并返回新的长度。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-reduce.html" target="_blank" rel="noopener noreferrer">reduce()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">将数组元素计算为一个值（从左到右）。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-reduceright.html" target="_blank" rel="noopener noreferrer">reduceRight()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">将数组元素计算为一个值（从右到左）。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-reverse.html" target="_blank" rel="noopener noreferrer">reverse()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">反转数组的元素顺序。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-shift.html" target="_blank" rel="noopener noreferrer">shift()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">删除并返回数组的第一个元素。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-slice-array.html" target="_blank" rel="noopener noreferrer">slice()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">选取数组的的一部分，并返回一个新数组。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-some.html" target="_blank" rel="noopener noreferrer">some()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">检测数组元素中是否有元素符合指定条件。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-sort.html" target="_blank" rel="noopener noreferrer">sort()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">对数组的元素进行排序。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-splice.html" target="_blank" rel="noopener noreferrer">splice()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">从数组中添加或删除元素。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-tostring-array.html" target="_blank" rel="noopener noreferrer">toString()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">把数组转换为字符串，并返回结果。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-unshift.html" target="_blank" rel="noopener noreferrer">unshift()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">向数组的开头添加一个或更多元素，并返回新的长度。</td></tr> <tr><td style="text-align:left;"><a href="http://www.runoob.com/jsref/jsref-valueof-array.html" target="_blank" rel="noopener noreferrer">valueOf()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">返回数组对象的原始值。</td></tr></tbody></table> <p>.splice(index,howmany,item)</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">index</td> <td style="text-align:left;">必需。整数，规定添加/删除项目的位置，使用负数可从数组结尾处规定位置。</td></tr> <tr><td style="text-align:left;">howmany</td> <td style="text-align:left;">必需。要删除的项目数量。如果设置为 0，则不会删除项目。</td></tr> <tr><td style="text-align:left;">item1, ..., itemX</td> <td style="text-align:left;">可选。向数组添加的新项目。</td></tr></tbody></table> <h3 id="数组方法改变原数组："><a href="#数组方法改变原数组：" aria-hidden="true" class="header-anchor">#</a> 数组方法改变原数组：</h3> <p><code>pop()</code>,<code>push()</code>,<code>reverse()</code>,<code>shift()</code>,<code>sort()</code>,<code>splice()</code>,<code>unshift()</code></p> <h3 id="不改变原数组："><a href="#不改变原数组：" aria-hidden="true" class="header-anchor">#</a> 不改变原数组：</h3> <p><code>concat()</code>,<code>jion()</code>,<code>slice()</code></p> <h2 id="object"><a href="#object" aria-hidden="true" class="header-anchor">#</a> Object</h2> <p>定义：多个数据的封装、用来保存多个数据的容器、一个对象代表现实中的一个事务</p> <p>如何访问对象内部属性：</p> <ul><li><p><code>.</code>属性名：编码简单，但有时不能用</p></li> <li><p><code>['属性名']</code>：编码麻烦，能通用，给对象添加一个属性，变量名不确定</p></li> <li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> propName<span class="token operator">=</span><span class="token string">'myage'</span>
<span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token number">18</span>
p<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token operator">=</span>value
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'var a= 2'</span><span class="token punctuation">)</span> <span class="token comment">//（‘代码块’）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">//2</span>
</code></pre></div></li> <li><p><code>Object.keys()</code>查看对象本身的所有属性</p></li> <li><p><code>delete</code>命令用于删除对象的属性，删除成功后返回true。</p></li> <li><p><code>in</code>运算符用于检查对象是否包含某个属性（注意，检查的是键名，不是键值），如果包含就返回<code>true</code>，否则返回<code>false</code></p></li></ul> <h3 id="object遍历方法"><a href="#object遍历方法" aria-hidden="true" class="header-anchor">#</a> Object遍历方法</h3> <ul><li><code>for...in</code>循环用来遍历一个对象的全部属性
<ul><li>它遍历的是对象所有可遍历（enumerable）的属性，会跳过不可遍历的属性。</li> <li>它不仅遍历对象自身的属性，还遍历继承的属性。</li> <li>所以使用<code>for...in</code>的时候，应该结合使用<code>hasOwnProperty</code>方法，在循环内部判断一下，某个属性是否为对象自身的属性。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'老张'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// name</span>
</code></pre></div></li> <li><code>for...of</code>可遍历Set,Map,类数组对象,(arguments，domNodeList)<div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">var</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span>
     a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
     b<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
     <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
             idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
             ks <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
         <span class="token keyword">return</span> <span class="token punctuation">{</span>
             <span class="token function-variable function">next</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token keyword">return</span> <span class="token punctuation">{</span>
                     value<span class="token punctuation">:</span> o<span class="token punctuation">[</span>ks<span class="token punctuation">[</span>idx<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                     done<span class="token punctuation">:</span> <span class="token punctuation">(</span>idx <span class="token operator">&gt;</span> ks<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                 <span class="token punctuation">}</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// ToDo:在函数内定义自己的 @@iterator</span>
 <span class="token comment">// Object.defineProperty(myObject, Symbol.iterator, {</span>
 <span class="token comment">//     enumerable: false,</span>
 <span class="token comment">//     writable: false,</span>
 <span class="token comment">//     configurable: true,</span>
 <span class="token comment">//     value: function () {</span>
 <span class="token comment">//         var o = this,</span>
 <span class="token comment">//             idx = 0,</span>
 <span class="token comment">//             ks = Object.keys(o)</span>
 <span class="token comment">//         return {</span>
 <span class="token comment">//             next: function () {</span>
 <span class="token comment">//                 return {</span>
 <span class="token comment">//                     value: o[ks[idx++]],</span>
 <span class="token comment">//                     done: (idx &gt; ks.length)</span>
 <span class="token comment">//                 }</span>
 <span class="token comment">//             }</span>
 <span class="token comment">//         }</span>
 <span class="token comment">//     }</span>
 <span class="token comment">// })</span>
 
 <span class="token keyword">var</span> it <span class="token operator">=</span> myObject<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> v <span class="token keyword">of</span> myObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</code></pre></div></li> <li>注意，如果<code>with</code>区块内部有变量的赋值操作，必须是当前对象已经存在的属性，否则会创造一个当前作用域的全局变量。<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">with</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  p1 <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
  p2 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>p1 <span class="token comment">// undefined</span>
p1 <span class="token comment">// 4</span>
</code></pre></div></li></ul> <h2 id="function"><a href="#function" aria-hidden="true" class="header-anchor">#</a> function</h2> <ul><li><p>声名方式：</p> <ul><li><p><strong>function声名</strong></p></li> <li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>函数表达式</strong></p></li> <li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">print</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>Function 构造函数(new调用)</strong></p></li> <li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span>
  <span class="token string">'x'</span><span class="token punctuation">,</span>
  <span class="token string">'y'</span><span class="token punctuation">,</span>
  <span class="token string">'return x + y'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等同于</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p><strong>函数名的提升</strong>:<code>JavaScript</code> 引擎将函数名视同变量名，所以采用<code>function</code>命令声明函数时，整个函数会像变量声明一样，被提升到代码头部。所以，下面的代码不会报错。</p></li> <li><p>函数的<code>name</code>属性返回函数的名字。</p></li> <li><p>函数的<code>length</code>属性返回函数预期传入的参数个数，即函数定义之中的参数个数</p></li> <li><p>函数的<code>toString</code>方法返回一个字符串，内容是函数的源码</p></li> <li><p><code>var</code>命令声明的变量，不管在什么位置，变量声明都会被提升到函数体的头部</p></li></ul> <h3 id="变量对象的创建过程"><a href="#变量对象的创建过程" aria-hidden="true" class="header-anchor">#</a> 变量对象的创建过程</h3> <ol><li>全局上下文的变量对象初始化是全局对象</li> <li>函数上下文的变量对象初始化只包括 Arguments 对象</li> <li>在进入执行上下文时会给变量对象添加形参、函数声明、变量声明等初始的属性值</li> <li>在代码执行阶段，会再次修改变量对象的属性值</li></ol> <h3 id="闭包"><a href="#闭包" aria-hidden="true" class="header-anchor">#</a> 闭包</h3> <ul><li><p>对闭包的理解：</p> <ul><li><p>JavaScript中的闭包，无非就是变量解析的过程。</p> <blockquote><p>每次定义一个函数，都会产生一个作用域链（scope chain）。当JavaScript寻找变量varible时（这个过程称为变量解析），总会优先在当前作用域链的第一个对象中查找属性varible ，如果找到，则直接使用这个属性；否则，继续查找下一个对象的是否存在这个属性；这个过程会持续直至找到这个属性或者最终未找到引发错误为止。</p></blockquote></li> <li><p>JavaScript中的函数运行在它们被定义的作用域里，而不是它们被执行的作用域里。</p></li></ul></li> <li><p>闭包的形成与变量的作用域以及变量的生存周期密切相关</p> <ul><li>变量作用域：<em>全局作用域</em>、<em>函数作用域</em></li></ul></li> <li><p>变量的生命周期：</p> <ul><li><p>对于全局作用域来说，生命周期是永久的，除非你主动销毁</p></li> <li><p>对于函数内的局部变量来说，随着函数调用的结束而被销毁</p> <blockquote><p>当创建闭包时，函数执行完毕，局部变量并没有消失，这是因为在闭包里返回了一个函数的引用，它可以访问调用到原闭包（外层）函数所产生的环境，而局部变量一直处于这个环境之中，既然局部变量所在的函数还能被外界所访问到，这个局部变量就有了不被销毁的理由，在这里产生了一个闭包结构，局部变量的生命看起来被延续了</p></blockquote></li></ul></li> <li><p>闭包的应用：</p> <ul><li>管理私有变量和私有方法，将对变量（状态）的变化封装在安全的环境中</li> <li>将代码封装成一个闭包形式，等待时机成熟的时候再使用，比如实现柯里化和反柯里化</li></ul></li> <li><p>闭包引发的问题：</p> <ul><li>闭包和内存泄露有关系的地方是，使用闭包的同时比较容易造成循环引用，如果闭包的作用域链中保存着一些DOM节点，这时候就有可能造成内存泄漏</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> el <span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
  el<span class="token punctuation">.</span>onclick <span class="token operator">=</span><span class="token function">functioan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alter</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//执行这段代码的时候，将匿名函数对象赋值给el的onclick属性；然后匿名函数内部又引用了el对象，存在循环引用，所以不能被回收</span>
<span class="token comment">//解决办法：</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> el <span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElentById</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> id<span class="token operator">=</span>el<span class="token punctuation">.</span>id<span class="token comment">//解除循环引用</span>
  el<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alter</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  el <span class="token operator">=</span> <span class="token keyword">null</span><span class="token comment">//将闭包引用外部函数中活动对象清楚</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="js内存泄漏"><a href="#js内存泄漏" aria-hidden="true" class="header-anchor">#</a> js内存泄漏</h3> <ul><li><p>定义：</p> <ul><li>程序的运行需要内存。只要程序提出要求，操作系统或者运行时（runtime）就必须供给内存。</li> <li>对于持续运行的服务进程（daemon），必须及时释放不再用到的内存。否则，内存占用越来越高，轻则影响系统性能，重则导致进程崩溃。</li> <li>不再用到的内存，没有及时释放，就叫做内存泄漏（memory leak）。</li></ul></li> <li><p>垃圾回收机制：</p> <ul><li><blockquote><p>原因：有些语言（比如 C 语言）必须手动释放内存，程序员负责内存管理。这很麻烦，所以大多数语言提供自动内存管理，减轻程序员的负担，这被称为&quot;垃圾回收机制&quot;（garbage collector）。</p></blockquote></li> <li><p>标记清除法：</p> <ul><li><p>简单来说，就是从根部（在JS中就是全局对象）出发定时扫描内存中的对象。凡是能从根部到达的对象，都是还需要使用的。那些无法由根部出发触及到的对象被标记为不再使用，稍后进行回收。</p></li> <li><p>存在问题：</p> <p>对现代浏览器来说，唯一要注意的就是明确切断需要回收的对象与根部的联系。有时候这种联系并不明显，且因为标记清除算法的强壮性，这个问题较少出现。最常见的内存泄露一般都与DOM元素绑定有关：</p></li></ul></li> <li><p>引用计数法：</p> <ul><li><p>javascript去维护一张表,存储内存中资源的引用次数,资源被引用+1,结束引用或者函数执行完毕结束作用域,引用次数-1,引用次数由1到0时不会执行,节省开销,直接标记</p></li> <li><p><em>存在的问题</em>：</p> <p>这个方式存在一个比较大的问题就是循环引用，就是说A对象包含一个指向B的指针，对象B也包含一个指向A的引用。 这就可能造成大量内存得不到回收（内存泄露），因为它们的引用次数永远不可能是 0 。</p></li> <li><p>解决办法：闭包</p></li></ul></li></ul></li> <li><p>内存泄漏的识别方法：</p> <ul><li>如果连续五次垃圾回收之后，内存占用一次比一次大，就有内存泄漏。 这要我们实时查看内存占用。</li> <li>开发者工具 -&gt; Capture/Memory -&gt; 录制 -&gt; 操作模拟用户使用 -&gt; 如果内存占用基本平稳，接近水平，就说明不存在内存泄漏。 反之，就是内存泄漏了。</li> <li>命令行：<code>console.log(process.memryUsage())</code> <ul><li>rss（resident set size）：所有内存占用，包括指令区和堆栈。</li> <li>heapTotal：&quot;堆&quot;占用的内存，包括用到的和没用到的。</li> <li>heapUsed：用到的堆的部分。</li> <li>external： V8 引擎内部的 C++ 对象占用的内存。</li></ul></li></ul></li></ul> <h3 id="es6-weakmap"><a href="#es6-weakmap" aria-hidden="true" class="header-anchor">#</a> ES6 WeakMap</h3> <ul><li><p>以上问题：及时清除引用非常重要。但是，你不可能记得那么多，有时候一疏忽就忘了，所以才有那么多内存泄漏。</p></li> <li><p>ES6 考虑到了这一点，推出了两种新的数据结构：WeakSet 和 WeakMap。它们对于<strong>值的引用都是不计入垃圾回收机制的</strong>，所以名字里面才会有一个&quot;Weak&quot;，表示这是弱引用。</p></li> <li><p>使用：</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> wm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
wm<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span><span class="token string">'some information'</span><span class="token punctuation">)</span>
wm<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token comment">//'some information'</span>
</code></pre></div></li> <li><p>先新建一个 Weakmap 实例。然后，将一个 DOM 节点作为键名存入该实例，并将一些附加信息作为键值，一起存放在 WeakMap 里面。这时，WeakMap 里面对element的引用就是弱引用，不会被计入垃圾回收机制。</p></li> <li><p>也就是说，DOM 节点对象的引用计数是1，而不是2。这时，一旦消除对该节点的引用，它占用的内存就会被垃圾回收机制释放。Weakmap 保存的这个键值对，也会自动消失。</p></li></ul></li></ul> <h3 id="js函数式编程指南"><a href="#js函数式编程指南" aria-hidden="true" class="header-anchor">#</a> js函数式编程指南</h3> <h4 id="纯函数"><a href="#纯函数" aria-hidden="true" class="header-anchor">#</a> 纯函数</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> xs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 纯的 .slice(0,3)选取数组的的一部分，并返回一个新数组。</span>
xs<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; [1,2,3]</span>
xs<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; [1,2,3]</span>
xs<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; [1,2,3]</span>

<span class="token comment">// 不纯的 .splice(0,3)从数组中添加或删除元素。</span>
xs<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; [1,2,3]</span>
xs<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; [4,5]</span>
xs<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; []</span>
</code></pre></div><h4 id="函数柯里化"><a href="#函数柯里化" aria-hidden="true" class="header-anchor">#</a> 函数柯里化</h4> <p><strong>定义</strong>：柯里化是一种将使用多个参数的一个函数转换成一系列使用一个参数的函数的技术。</p> <h3 id="回调函数"><a href="#回调函数" aria-hidden="true" class="header-anchor">#</a> 回调函数</h3> <ul><li><p>定义：我定义的，我没有调用它，但是他执行了</p></li> <li><p>常见的有 ：</p> <ul><li><p><code>setTimeout</code>定时器回调函数</p></li> <li><p>dom事件回调函数</p></li> <li><div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>ajax请求回调函数</p></li> <li><p>生命周期回调函数</p></li></ul></li></ul> <h3 id="立即调用的函数表达式（iife）-匿名函数自调用"><a href="#立即调用的函数表达式（iife）-匿名函数自调用" aria-hidden="true" class="header-anchor">#</a> 立即调用的函数表达式（IIFE）(匿名函数自调用)</h3> <ul><li><p>作用：隐匿实现，不会污染外部(全局)命名空间</p></li> <li><p>用来编译js模块</p></li> <li><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">1</span>
  <span class="token keyword">function</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  window<span class="token punctuation">.</span><span class="token function-variable function">$</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span>text
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//在自调用函数之前要加；分号 []之前也要加；分号 </span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// $是一个函数，$执行后返回的是一个对象</span>
</code></pre></div></li></ul> <h3 id="this指向"><a href="#this指向" aria-hidden="true" class="header-anchor">#</a> this指向</h3> <ul><li>在任何函数本质上都是通过某个对象来调用的</li> <li>所有函数内部都有一个变量this</li> <li>它的值是调用函数的当前对象</li> <li>this的值
<ul><li><code>text()</code>：window</li> <li><code>p.text()</code>：p</li> <li><code>new text()</code>：新创建的对象</li> <li><code>p.call(obj)</code>：obj</li></ul></li></ul> <h2 id="原型"><a href="#原型" aria-hidden="true" class="header-anchor">#</a> 原型</h2> <p>每个函数都有 <code>prototype</code> 属性，除了 <code>Function.prototype.bind()</code>，该属性指向原型。</p> <ul><li>默认值空 <code>Object</code> (原型对象)</li></ul> <p>原型对象中有一个属性<code>constructor</code>它指向函数对象,给原型对象添加属性 —&gt; 实例对象可以访问</p> <p>每个对象都有 <code>__proto__</code> 属性，指向了创建该对象的构造函数的原型。</p> <p>其实这个属性指向了 <code>[[prototype]]</code>，但是 <code>[[prototype]]</code> 是内部属性，我们并不能访问到，所以使用 <code>_proto_</code> 来访问。</p> <p>对象可以通过 <code>__proto__</code> 来寻找不属于该对象的属性，<code>__proto__</code> 将对象连接起来组成了原型链。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//每个函数都有 `prototype` 属性,每个函数都有 `prototype` 属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span><span class="token keyword">typeof</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">Fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">// 原型对象中有一个属性constructor，它指向函数对象</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Date<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Fn<span class="token punctuation">)</span>
<span class="token comment">//给原型对象添加属性(一般) -&gt; 实例对象可以访问</span>
<span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'text()'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
fn<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//对象的隐式类型的值为其对应构造函数的显式的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token operator">==</span>fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span>
</code></pre></div><h4 id="显式原型-隐式原型"><a href="#显式原型-隐式原型" aria-hidden="true" class="header-anchor">#</a> 显式原型  /  隐式原型</h4> <ul><li>每个函数<code>function</code>都有一个<code>prototype</code>显式原型(属性)</li> <li>每个实例对象都有一个<code>__proto__</code>可称为隐式原型(属性)</li> <li>对象的隐式类型的值为其对应构造函数的显式的值
<ul><li>函数的<code>prototype</code>属性：在定义函数时自动添加的，默认值是空Object对象</li> <li>对象的<code>__proto__</code>属性：创建对象时自动添加，默认值为构造函数的<code>prototype</code>属性</li> <li>程序员可操作显式原型，但不能操作隐式原型(ES6之前)</li></ul></li></ul> <p><img src="https://github.com/Mucheng910/image/blob/master/%E5%8E%9F%E5%9E%8B%E9%93%BE.png?raw=true" alt="屏幕快照 2019-04-20 14.54.13"></p> <h3 id="原型链"><a href="#原型链" aria-hidden="true" class="header-anchor">#</a> 原型链</h3> <blockquote><p>每次定义一个函数，都会产生一个作用域链（scope chain）。当JavaScript寻找变量varible时（这个过程称为变量解析），总会优先在当前作用域链的第一个对象中查找属性varible ，如果找到，则直接使用这个属性；否则，继续查找下一个对象的是否存在这个属性；这个过程会持续直至找到这个属性或者最终未找到引发错误为止。</p></blockquote> <ul><li>访问一个对象的属性时
<ul><li>先在自身属性中查找，找到返回</li> <li>如果没有，再沿着<code>__proto__</code>这条链向上找，找到返回</li> <li>如果最终没找到就返回<code>undefined</code></li></ul></li> <li>别名：隐式原型链</li> <li>作用：查找对象的属性(方法)</li> <li><img src="https://github.com/Mucheng910/image/blob/master/%E5%8E%9F%E5%9E%8B%E9%93%BE%E5%9B%BE2.png?raw=true" alt="JS _ InterviewMap"></li></ul> <h3 id="new"><a href="#new" aria-hidden="true" class="header-anchor">#</a> new</h3> <ol><li>新生成了一个对象</li> <li>链接到原型</li> <li>绑定 this</li> <li>返回新对象</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个空的对象</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 获得构造函数</span>
    <span class="token keyword">let</span> Con <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
    <span class="token comment">// 链接到原型</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Con</span><span class="token punctuation">.</span>prototype
    <span class="token comment">// 绑定 this，执行构造函数</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">Con</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
    <span class="token comment">// 确保 new 出来的是个对象</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> result <span class="token punctuation">:</span> obj
<span class="token punctuation">}</span>
</code></pre></div><h2 id="继承"><a href="#继承" aria-hidden="true" class="header-anchor">#</a> 继承</h2> <h3 id="es5继承："><a href="#es5继承：" aria-hidden="true" class="header-anchor">#</a> ES5继承：</h3> <ol><li><p>构造继承：</p> <ul><li><p>冒充继承：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token punctuation">;</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">showName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是'</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/** 
 *  @description 以自身运行环境运行函数，这时函数内的this均指向Child，
 *  因此父类的属性全部移植到子类中
 */</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">//这三句代码最关键</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>temp <span class="token operator">=</span> Person<span class="token punctuation">;</span> <span class="token comment">//创建一个自身缓存函数并将父类构造赋值</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">temp</span><span class="token punctuation">(</span><span class="token string">'李端'</span><span class="token punctuation">,</span><span class="token string">'26'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">;</span><span class="token comment">//删除缓存函数</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child<span class="token punctuation">.</span><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//我是李端</span>
</code></pre></div></li> <li><p>绑定this方式实现:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token punctuation">;</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">showName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是'</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/** 
 *  @description 以自身运行环境运行函数，这时函数内的this均指向Child，
 *  因此父类的属性全部移植到子类中
 */</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'李端'</span><span class="token punctuation">,</span><span class="token string">'26'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绑定this到Person运行环境执行函数</span>
       <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">'李端'</span><span class="token punctuation">,</span><span class="token string">'26'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'李端'</span><span class="token punctuation">,</span><span class="token string">'26'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child<span class="token punctuation">.</span><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//我是李端</span>
</code></pre></div></li></ul></li> <li><p>原型链继承：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'使用原型得到'</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'李端'</span><span class="token punctuation">,</span><span class="token string">'26'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
per<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建新对象并实现继承</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'端瑞'</span><span class="token punctuation">,</span><span class="token string">'23'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stu<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>组合继承（组合构造和原型方式实现继承）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token comment">//继承属性</span>
 <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment">//继承方法</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType<span class="token punctuation">;</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>寄生继承</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createAnother</span><span class="token punctuation">(</span><span class="token parameter">original</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">var</span> clone <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通过调用函数创建一个新对象</span>
 clone<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//以某种方式来增强这个对象</span>
 <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> clone<span class="token punctuation">;</span> <span class="token comment">//返回这个对象</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
 name<span class="token punctuation">:</span> <span class="token string">&quot;Nicholas&quot;</span><span class="token punctuation">,</span>
 friends<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Shelby&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Court&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Van&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> anotherPerson <span class="token operator">=</span> <span class="token function">createAnother</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
anotherPerson<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;hi&quot; </span>
</code></pre></div></li> <li><p>寄生组合继承</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">inheritPrototype</span><span class="token punctuation">(</span><span class="token parameter">subType<span class="token punctuation">,</span> superType</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">var</span> prototype <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>superType<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//创建对象</span>
 prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> subType<span class="token punctuation">;</span> <span class="token comment">//增强对象</span>
 subType<span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype<span class="token punctuation">;</span> <span class="token comment">//指定对象</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">inheritPrototype</span><span class="token punctuation">(</span>SubType<span class="token punctuation">,</span> SuperType<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre></div></li></ol> <h2 id="跨域"><a href="#跨域" aria-hidden="true" class="header-anchor">#</a> 跨域</h2> <p>浏览器同源策略的同域的要求
1.协议相同
2.域名相同
3.端口相同</p> <h3 id="jsonp"><a href="#jsonp" aria-hidden="true" class="header-anchor">#</a> Jsonp</h3> <p><em>因为 jsonp 是通过插入一个 script 标签，利用 script 可以跨域请求来实现的</em></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">//动态创建script标签，并请求</span>
    <span class="token keyword">function</span> <span class="token function">addScriptTag</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'text/javascript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//如：在onload后，跨域请求</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">addScriptTag</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8080/jsonp?callback=monkey'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//回调的方法,且必须为全局方法，不然会报错</span>
    <span class="token keyword">function</span> <span class="token function">monkey</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> data1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#data'</span><span class="token punctuation">)</span>
        data1<span class="token punctuation">.</span>innerText<span class="token operator">=</span>data
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
 </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>node.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//引入url模块解析url字符串</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//引入querystring模块处理query字符串</span>
<span class="token keyword">var</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建新的HTTP服务器</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//通过request事件来响应request请求</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> urlPath <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlPath<span class="token punctuation">)</span>
    <span class="token keyword">var</span> qs <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>qs<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>qs<span class="token punctuation">.</span>callback<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>urlPath <span class="token operator">===</span> <span class="token string">'/jsonp'</span> <span class="token operator">&amp;&amp;</span> qs<span class="token punctuation">.</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json;charset=utf-8'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&quot;Monkey&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> callback <span class="token operator">=</span> qs<span class="token punctuation">.</span>callback <span class="token operator">+</span> <span class="token string">'('</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">');'</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'Hell World\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//监听8080端口</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'8080'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//用于提示我们服务器启动成功</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Server running!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="cors"><a href="#cors" aria-hidden="true" class="header-anchor">#</a> CORS</h3> <p>需要服务器设置header ：Access-Control-Allow-Origin。
浏览器将cors请求分为两种： 简单请求、复杂请求</p> <ul><li>简单请求条件（同时满足以下两大条件）：
<ol><li>HEAD GET POST 请求</li> <li>HTTP的头信息为下字段：</li></ol> <ul><li>Accept</li> <li>Accept-Language</li> <li>Content-Language</li> <li>Last-Event-ID</li> <li>Content-Type：只限于三个值<code>application/x-www-form-urlencoded</code>、
<code>multipart/form-data</code>、
<code>text/plain</code><br>
对于简单请求，浏览器直接发出cors请求（即在头信息中添加origin字段）</li></ul></li></ul> <ul><li>复杂请求
<ul><li>如请求方法是<code>PUT</code>/<code>DELETE</code>/<code>CONNECT</code>/<code>OPTIONS</code>/<code>TRACE</code>/<code>PATCH</code>，或者Content-Type字段的类型与简单请求相反</li> <li>复杂请求的CORS请求，会在正式通信之前，增加一次HTTP查询请求，称为&quot;预检&quot;请求,
该请求是 option 方法的，通过该请求来判断服务端是否允许跨域请求。</li></ul></li></ul> <p><img src="https://github.com/Mucheng910/image/blob/master/%E8%B7%A8%E5%9F%9FCORS.png?raw=true" alt="屏幕快照 2019-04-23 13.45.41"></p> <ul><li><code>Access-Control-Allow-Origin:</code> 必写（*） ,代表着允许所有域名的跨域请求，</li> <li><code>Access-Control-Allow-Credentials:</code> 可写，该值是一个布尔值，表示是否允许发送Cookie,默认情况下，Cookie不包括CORS请求中。</li> <li><code>Access-Control-Expose-Header:</code> 在CORS请求时浏览器的XMLHttpRequest对象的getResponseHeader()方法只可以拿到六个基本字段，如果还想拿到其他字段就必须在Access-Control-Expose-Header中指定</li></ul> <h3 id="document-domain"><a href="#document-domain" aria-hidden="true" class="header-anchor">#</a> document.domain</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--//domain1.html--&gt;</span>
<span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://localhost:63342/node-demo/ky%E8%B7%A8%E5%9F%9F%E7%9B%B8%E5%85%B3/ed/domain1.html<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>load()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>frame<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">/*
       该方式只能用于二级域名相同的情况下，比如 a.test.com 和 b.test.com 适用于该方式。
只需要给页面添加 document.domain ='test.com' 表示二级域名都相同就可以实现跨域。
实现原理：两个页面都通过js强制设置document.domain为基础主域，就实现了同域。
     */</span>
    <span class="token comment">// document.domain = 'localhost'</span>
    <span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>frame<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--domain2.html--&gt;</span>
<span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>b.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// document.domain = 'localhost'</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="nginx"><a href="#nginx" aria-hidden="true" class="header-anchor">#</a> nginx</h3> <p>反向代理 这个方法一般很少有人提及，但是他可以不用目标服务器配合，不过需要你搭建一个中转nginx服务器，用于转发请求。</p> <h3 id="websocket"><a href="#websocket" aria-hidden="true" class="header-anchor">#</a> webSocket</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">'ws://localhost:3000'</span><span class="token punctuation">)</span>
    socket<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//用于指定连接成功后的回调</span>
        socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'我是localhost:63342,你是？'</span><span class="token punctuation">)</span> <span class="token comment">//向服务端发送数据</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    socket<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//从服务端接受数据时的回调</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>node.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> WebSocket <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ws'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> wss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket<span class="token punctuation">.</span>Server</span><span class="token punctuation">(</span><span class="token punctuation">{</span>port<span class="token punctuation">:</span> <span class="token number">3000</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

wss<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ws</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ws<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">我是localhost: 3000</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="访问跨域的页面"><a href="#访问跨域的页面" aria-hidden="true" class="header-anchor">#</a> 访问跨域的页面</h3> <p>4，html5的 postMessage+iframe 这个也是需要目标服务器或者说是目标页面写一个postMessage，主要侧重于前端通讯。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/FDMap/CSS.html" class="prev">CSS</a></span> <span class="next"><a href="/FDMap/DOM.html">Dom</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.08e121f0.js" defer></script><script src="/assets/js/2.9b2c206e.js" defer></script><script src="/assets/js/9.a9a34424.js" defer></script>
  </body>
</html>
