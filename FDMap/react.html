<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React | ä¸ªäººä¸»é¡µ</title>
    <meta name="description" content="ğŸ™…â€â™€ ï¸">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
  <link rel="apple-touch-icon" href="/images/photo.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.019fe3db.css" as="style"><link rel="preload" href="/assets/js/app.08e121f0.js" as="script"><link rel="preload" href="/assets/js/2.9b2c206e.js" as="script"><link rel="preload" href="/assets/js/14.379d5681.js" as="script"><link rel="prefetch" href="/assets/js/10.9d85fd93.js"><link rel="prefetch" href="/assets/js/11.f3dbfea6.js"><link rel="prefetch" href="/assets/js/12.d6f42a33.js"><link rel="prefetch" href="/assets/js/13.0c7a6aab.js"><link rel="prefetch" href="/assets/js/15.a795006f.js"><link rel="prefetch" href="/assets/js/16.d65d283d.js"><link rel="prefetch" href="/assets/js/17.265fbf75.js"><link rel="prefetch" href="/assets/js/18.730f1630.js"><link rel="prefetch" href="/assets/js/19.905bc299.js"><link rel="prefetch" href="/assets/js/20.7046d84e.js"><link rel="prefetch" href="/assets/js/21.abf3fa17.js"><link rel="prefetch" href="/assets/js/22.21efee47.js"><link rel="prefetch" href="/assets/js/23.7eb77dc1.js"><link rel="prefetch" href="/assets/js/24.f5af4b3a.js"><link rel="prefetch" href="/assets/js/25.cbde6c41.js"><link rel="prefetch" href="/assets/js/26.fdacd15c.js"><link rel="prefetch" href="/assets/js/3.b6959132.js"><link rel="prefetch" href="/assets/js/4.1ff495fc.js"><link rel="prefetch" href="/assets/js/5.9aadbdc1.js"><link rel="prefetch" href="/assets/js/6.c092145a.js"><link rel="prefetch" href="/assets/js/7.70cfcfc9.js"><link rel="prefetch" href="/assets/js/8.b55986c0.js"><link rel="prefetch" href="/assets/js/9.a9a34424.js">
    <link rel="stylesheet" href="/assets/css/0.styles.019fe3db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ä¸ªäººä¸»é¡µ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/FDMap/" class="nav-link router-link-active">å‰ç«¯åŸºç¡€</a></div><div class="nav-item"><a href="/liCoding/" class="nav-link">æ‰‹æ’•ä»£ç </a></div><div class="nav-item"><a href="/FDModule/" class="nav-link">è®¾è®¡æ¨¡å¼</a></div><div class="nav-item"><a href="https://github.com/Mucheng910" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/FDMap/" class="nav-link router-link-active">å‰ç«¯åŸºç¡€</a></div><div class="nav-item"><a href="/liCoding/" class="nav-link">æ‰‹æ’•ä»£ç </a></div><div class="nav-item"><a href="/FDModule/" class="nav-link">è®¾è®¡æ¨¡å¼</a></div><div class="nav-item"><a href="https://github.com/Mucheng910" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åŸºç¡€</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>è¿›é˜¶</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FDMap/WX.html" class="sidebar-link">å¾®ä¿¡å°ç¨‹åº</a></li><li><a href="/FDMap/react.html" class="active sidebar-link">React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/react.html#ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link">ç”Ÿå‘½å‘¨æœŸ</a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#react-æ¨å‡ºæ–°çš„ç”Ÿå‘½å‘¨æœŸçš„åŸå› " class="sidebar-link">react æ¨å‡ºæ–°çš„ç”Ÿå‘½å‘¨æœŸçš„åŸå› </a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#å•å‘æ•°æ®æµ-reactç»„ä»¶ä¼ å€¼" class="sidebar-link">å•å‘æ•°æ®æµ&amp;Reactç»„ä»¶ä¼ å€¼</a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#setstate" class="sidebar-link">setState</a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#jsx" class="sidebar-link">jsx</a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#react-createelement" class="sidebar-link">React.createElement</a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#keyå€¼çš„ä½œç”¨" class="sidebar-link">keyå€¼çš„ä½œç”¨</a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#hooks" class="sidebar-link">HOOKS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDMap/react.html#åˆ©ç”¨-usestate-åˆ›å»º-redux" class="sidebar-link">åˆ©ç”¨ useState åˆ›å»º Redux</a></li></ul></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#reacté«˜é˜¶ç»„ä»·" class="sidebar-link">reacté«˜é˜¶ç»„ä»·</a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#react-router" class="sidebar-link">React-router</a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#diffç®—æ³•" class="sidebar-link">diffç®—æ³•</a></li><li class="sidebar-sub-header"><a href="/FDMap/react.html#react-css-æ ·å¼" class="sidebar-link">react css æ ·å¼</a></li></ul></li><li><a href="/FDMap/redux.html" class="sidebar-link">Redux ç³»åˆ—</a></li><li><a href="/FDMap/youHua.html" class="sidebar-link">å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç½‘ç»œ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react"><a href="#react" aria-hidden="true" class="header-anchor">#</a> React</h1> <h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸ</h2> <p><img src="https://github.com/Mucheng910/image/blob/master/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F3.png?raw=true" alt="fd1007d2b05049b3705d90d7738185fe"></p> <p><img src="https://github.com/Mucheng910/image/blob/master/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png?raw=true" alt="å±å¹•å¿«ç…§ 2019-03-29 16.39.29"></p> <p><img src="https://github.com/Mucheng910/image/blob/master/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F2.png?raw=true" alt="å±å¹•å¿«ç…§ 2019-03-29 17.03.43"></p> <p><img src="https://github.com/Mucheng910/image/blob/master/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F4.png?raw=true" alt="å±å¹•å¿«ç…§ 2019-03-29 16.36.51"></p> <p>React 16 ä¸­æ–°çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• - <code>componentDidCatch</code>, å®ƒèƒ½<code>æ•è·åœ¨å­ç»„ä»¶æ ‘ä¸­ä»»ä½•åœ°æ–¹çš„ JavaScript å¼‚å¸¸ï¼Œå¹¶æ‰“å°è¿™äº›é”™è¯¯å’Œå±•ç¤ºå¤‡ç”¨UI</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">compoentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span>info</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="react-æ¨å‡ºæ–°çš„ç”Ÿå‘½å‘¨æœŸçš„åŸå› "><a href="#react-æ¨å‡ºæ–°çš„ç”Ÿå‘½å‘¨æœŸçš„åŸå› " aria-hidden="true" class="header-anchor">#</a> react æ¨å‡ºæ–°çš„ç”Ÿå‘½å‘¨æœŸçš„åŸå› </h2> <p>reactæ‰“ç®—åœ¨17ç‰ˆæœ¬æ¨å‡ºæ–°çš„Async Renderingï¼Œæå‡ºä¸€ç§å¯è¢«æ‰“æ–­çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œå¯ä»¥è¢«æ‰“æ–­çš„é˜¶æ®µæ­£æ˜¯å®é™…domæŒ‚è½½ä¹‹å‰çš„è™šæ‹Ÿdomæ„å»ºé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯è¦è¢«å»æ‰çš„ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p> <p>ç”Ÿå‘½å‘¨æœŸä¸€æ—¦è¢«æ‰“æ–­ï¼Œä¸‹æ¬¡æ¢å¤çš„æ—¶å€™åˆä¼šå†è·‘ä¸€æ¬¡ä¹‹å‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œå› æ­¤componentWillMountï¼ŒcomponentWillReceivePropsï¼Œ componentWillUpdateéƒ½ä¸èƒ½ä¿è¯åªåœ¨æŒ‚è½½/æ‹¿åˆ°props/çŠ¶æ€å˜åŒ–çš„æ—¶å€™åˆ·æ–°ä¸€æ¬¡äº†ï¼Œæ‰€ä»¥è¿™ä¸‰ä¸ªæ–¹æ³•è¢«æ ‡è®°ä¸ºä¸å®‰å…¨ã€‚</p> <h2 id="å•å‘æ•°æ®æµ-reactç»„ä»¶ä¼ å€¼"><a href="#å•å‘æ•°æ®æµ-reactç»„ä»¶ä¼ å€¼" aria-hidden="true" class="header-anchor">#</a> å•å‘æ•°æ®æµ&amp;Reactç»„ä»¶ä¼ å€¼</h2> <ul><li><strong>çˆ¶å­ç»„ä»¶é—´çš„ä¼ å€¼</strong>(é€šè¿‡propsæ¥ä¼ å€¼)</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>//çˆ¶ç»„ä»¶
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Es6cComponent</span> <span class="token attr-name">nameall</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>abc<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>//å­ç»„ä»¶
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{this.props.nameall}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p><strong>å­çˆ¶ç»„ä»¶é—´çš„ä¼ å€¼</strong>(å›è°ƒå‡½æ•°)</p> <p><img src="https://github.com/Mucheng910/image/blob/master/react%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC.png?raw=true" alt="1034735-20180320210738055-976922970"></p></li> <li><p><strong>å…„å¼Ÿç»„ä»¶ä¼ å€¼</strong>(å­ç»„ä»¶ä¼ ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å†ä¼ ç»™å­ç»„ä»¶)</p></li></ul> <h2 id="setstate"><a href="#setstate" aria-hidden="true" class="header-anchor">#</a> setState</h2> <p><code>es6</code>ä¸­å¯ä»¥ä½¿ç”¨<code>Promise</code>æ›´ä¼˜é›…çš„ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°è£…ä¸€ä¸‹<code>setState</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">setStateAsync</span><span class="token punctuation">(</span><span class="token parameter">nextState</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>nextState<span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setStateAsync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setStateAsync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://github.com/Mucheng910/image/blob/master/react-setState%E8%BF%87%E7%A8%8B.png?raw=true" alt="å±å¹•å¿«ç…§ 2019-04-23 09"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      val<span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>val<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç¬¬ 1 æ¬¡ log</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>val<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç¬¬ 2 æ¬¡ log</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>val<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç¬¬ 3 æ¬¡ log</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>val<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç¬¬ 4 æ¬¡ log</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><em>å› ä¸ºåœ¨ componentDidMount ä¸­è°ƒç”¨ setState æ—¶ï¼ŒbatchingStrategy çš„ isBatchingUpdates å·²ç»è¢«è®¾ä¸º trueï¼Œæ‰€ä»¥ä¸¤æ¬¡ setState çš„ç»“æœå¹¶æ²¡æœ‰ç«‹å³ç”Ÿæ•ˆï¼Œè€Œæ˜¯è¢«æ”¾è¿›äº† dirtyComponents ä¸­ã€‚è¿™ä¹Ÿè§£é‡Šäº†ä¸¤æ¬¡æ‰“å°this.state.val éƒ½æ˜¯ 0 çš„åŸå› ï¼Œæ–°çš„ state è¿˜æ²¡æœ‰è¢«åº”ç”¨åˆ°ç»„ä»¶ä¸­ã€‚</em></p></blockquote> <blockquote><p><em>å†åè§‚ setTimeout ä¸­çš„ä¸¤æ¬¡ setStateï¼Œå› ä¸ºæ²¡æœ‰å‰ç½®çš„ batchedUpdate è°ƒç”¨ï¼Œæ‰€ä»¥ batchingStrategy çš„ isBatchingUpdates æ ‡å¿—ä½æ˜¯ falseï¼Œä¹Ÿå°±å¯¼è‡´äº†æ–°çš„ state é©¬ä¸Šç”Ÿæ•ˆï¼Œæ²¡æœ‰èµ°åˆ° dirtyComponents åˆ†æ”¯ã€‚ä¹Ÿå°±æ˜¯ï¼ŒsetTimeout ä¸­ç¬¬ä¸€æ¬¡ setState æ—¶ï¼Œthis.state.val ä¸º 1ï¼Œè€Œ setState å®Œæˆåæ‰“å°æ—¶ this.state.val å˜æˆäº† 2ã€‚ç¬¬äºŒæ¬¡ setState åŒç†ã€‚</em></p></blockquote> <h2 id="jsx"><a href="#jsx" aria-hidden="true" class="header-anchor">#</a> jsx</h2> <ul><li>Babel è½¬è¯‘å™¨ä¼šæŠŠ <strong>JSX</strong> è½¬æ¢æˆä¸€ä¸ªåä¸º <code>React.createElement()</code> çš„æ–¹æ³•è°ƒç”¨ã€‚</li> <li>è§£æçš„ä¼šæœ‰ï¼šå…ƒç´ ï¼Œå±æ€§ï¼Œæ–¹æ³•</li> <li>JSXæ˜¯å°†HTMLè¯­æ³•åŠ å…¥åˆ°Javascriptä»£ç ä¸­ï¼Œå†é€šè¿‡ç¿»è¯‘å™¨è½¬æ¢æˆçº¯Javascriptåè®©æµè§ˆå™¨æ‰§è¡Œã€‚å®é™…å¼€å‘ä¸­æ‰“åŒ…é˜¶æ®µéƒ½å·²å°†ç¼–è¯‘æˆçº¯Javascriptä»£ç ï¼Œæ‰€ä»¥ä¸ä¼šå¸¦æ¥ä»»ä½•å‰¯ä½œç”¨ï¼Œåè€Œè®©ä»£ç æ›´åŠ ç›´è§‚å¹¶ä¸”æ˜“äºç»´æŠ¤</li> <li>åˆ›å»ºå…ƒç´ æ—¶å€™é™¤äº†ä½¿ç”¨React.createElementåˆ›å»ºä¹‹å¤–ï¼Œå…¶ç»“æ„ä¸JSONä¸€æ ·ã€‚</li> <li>JSXå®è´¨ä¸Šå°±æ˜¯ä¸ºäº†æ–¹ä¾¿Reactå°†Viewå±‚ç»„ä»¶åŒ–ï¼Œé€šè¿‡å°†HTMlè¯­æ³•åŠ åˆ°Javascriptä»£ç ä¸­ï¼Œä»¥æ‰¿æ‹…æ„å»ºé¡µé¢çš„èŒè´£</li></ul> <h2 id="react-createelement"><a href="#react-createelement" aria-hidden="true" class="header-anchor">#</a> React.createElement</h2> <p>å…¶ä¸­ <code>createElement(a, b, c)</code></p> <ul><li>ç¬¬ä¸€ä¸ªå‚æ•° aï¼šè¡¨ç¤ºå…ƒç´ çš„ç±»å‹ï¼Œæ¯”å¦‚ï¼šh1, div ç­‰ã€‚</li> <li>ç¬¬äºŒä¸ªå‚æ•° bï¼šè¡¨ç¤ºè¯¥å…ƒç´ ä¸Šçš„å±æ€§ï¼Œä½¿ç”¨ JavaScript å¯¹è±¡æ–¹å¼è¡¨ç¤ºã€‚</li> <li>ç¬¬ä¸‰ä¸ªå‚æ•° cï¼šè¡¨ç¤ºè¯¥å…ƒç´ å†…éƒ¨çš„å†…å®¹ï¼Œå¯ä»¥æ˜¯æ–‡å­—ï¼Œå¯ä»¥ç»§ç»­åµŒå¥—å¦å¤–ä¸€ä¸ª ã€‚</li></ul> <h2 id="keyå€¼çš„ä½œç”¨"><a href="#keyå€¼çš„ä½œç”¨" aria-hidden="true" class="header-anchor">#</a> keyå€¼çš„ä½œç”¨</h2> <p>Keys æ˜¯ React ç”¨äºè¿½è¸ªå“ªäº›åˆ—è¡¨ä¸­å…ƒç´ è¢«ä¿®æ”¹ã€è¢«æ·»åŠ æˆ–è€…è¢«ç§»é™¤çš„è¾…åŠ©æ ‡è¯†ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>todoItems<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>item<span class="token punctuation">,</span> key<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯æŸä¸ªå…ƒç´ çš„ key åœ¨å…¶åŒçº§å…ƒç´ ä¸­å…·æœ‰å”¯ä¸€æ€§ã€‚åœ¨ React Diff ç®—æ³•ä¸­ React ä¼šå€ŸåŠ©å…ƒç´ çš„ Key å€¼æ¥åˆ¤æ–­è¯¥å…ƒç´ æ˜¯æ–°è¿‘åˆ›å»ºçš„è¿˜æ˜¯è¢«ç§»åŠ¨è€Œæ¥çš„å…ƒç´ ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„å…ƒç´ é‡æ¸²æŸ“ã€‚æ­¤å¤–ï¼ŒReact è¿˜éœ€è¦å€ŸåŠ© Key å€¼æ¥åˆ¤æ–­å…ƒç´ ä¸æœ¬åœ°çŠ¶æ€çš„å…³è”å…³ç³»ï¼Œå› æ­¤æˆ‘ä»¬ç»ä¸å¯å¿½è§†è½¬æ¢å‡½æ•°ä¸­ Key çš„é‡è¦æ€§ã€‚</p> <h2 id="hooks"><a href="#hooks" aria-hidden="true" class="header-anchor">#</a> HOOKS</h2> <p><strong>React Hooks è¦è§£å†³çš„é—®é¢˜æ˜¯çŠ¶æ€å…±äº«</strong>ï¼Œæ˜¯ç»§ <a href="https://link.juejin.im/?target=https%3A%2F%2Freactjs.org%2Fdocs%2Frender-props.html" target="_blank" rel="noopener noreferrer">render-props<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å’Œ <a href="https://link.juejin.im/?target=https%3A%2F%2Freactjs.org%2Fdocs%2Fhigher-order-components.html" target="_blank" rel="noopener noreferrer">higher-order components<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä¹‹åçš„ç¬¬ä¸‰ç§çŠ¶æ€å…±äº«æ–¹æ¡ˆï¼Œä¸ä¼šäº§ç”Ÿ JSX åµŒå¥—åœ°ç‹±é—®é¢˜ã€‚</p> <ul><li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#basic-hooks" target="_blank" rel="noopener noreferrer">åŸºç¡€ Hook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <ul><li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#usestate" target="_blank" rel="noopener noreferrer"><code>useState</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#useeffect" target="_blank" rel="noopener noreferrer"><code>useEffect</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#usecontext" target="_blank" rel="noopener noreferrer"><code>useContext</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#additional-hooks" target="_blank" rel="noopener noreferrer">é¢å¤–çš„ Hook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <ul><li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#usereducer" target="_blank" rel="noopener noreferrer"><code>useReducer</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#usecallback" target="_blank" rel="noopener noreferrer"><code>useCallback</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#usememo" target="_blank" rel="noopener noreferrer"><code>useMemo</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#useref" target="_blank" rel="noopener noreferrer"><code>useRef</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#useimperativehandle" target="_blank" rel="noopener noreferrer"><code>useImperativeHandle</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#uselayouteffect" target="_blank" rel="noopener noreferrer"><code>useLayoutEffect</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#usedebugvalue" target="_blank" rel="noopener noreferrer"><code>useDebugValue</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul> <ul><li><h3 id="åˆ©ç”¨-usestate-åˆ›å»º-redux"><a href="#åˆ©ç”¨-usestate-åˆ›å»º-redux" aria-hidden="true" class="header-anchor">#</a> åˆ©ç”¨ useState åˆ›å»º Redux</h3>
Redux çš„ç²¾é«“å°±æ˜¯ Reducerï¼Œè€Œåˆ©ç”¨ React Hooks å¯ä»¥è½»æ¾åˆ›å»ºä¸€ä¸ª Redux æœºåˆ¶ï¼š<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è¿™å°±æ˜¯ Redux</span>
<span class="token keyword">function</span> <span class="token function">useReducer</span><span class="token punctuation">(</span><span class="token parameter">reducer<span class="token punctuation">,</span> initialState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> nextState <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setState</span><span class="token punctuation">(</span>nextState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>è¿™ä¸ªè‡ªå®šä¹‰ Hook çš„ value éƒ¨åˆ†å½“ä½œ redux çš„ stateï¼ŒsetValue éƒ¨åˆ†å½“ä½œ redux çš„ dispatchï¼Œåˆèµ·æ¥å°±æ˜¯ä¸€ä¸ª reduxã€‚è€Œ react-redux çš„ connect éƒ¨åˆ†åšçš„äº‹æƒ…ä¸ Hook è°ƒç”¨ä¸€æ ·ï¼š<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ä¸€ä¸ª Action</span>
<span class="token keyword">function</span> <span class="token function">useTodos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>todosReducer<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleAddClick</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> text <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> <span class="token punctuation">{</span> handleAddClick <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç»‘å®š Todos çš„ UI</span>
<span class="token keyword">function</span> <span class="token function">TodosUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> actions<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useTodos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">todo<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>actions<span class="token punctuation">.</span>handleAddClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Add Todo<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div></li></ul> <p>åˆ©ç”¨ useEffect ä»£æ›¿ä¸€äº›ç”Ÿå‘½å‘¨æœŸ</p> <p>åœ¨ useState ä½ç½®é™„è¿‘ï¼Œå¯ä»¥ä½¿ç”¨ useEffect å¤„ç†å‰¯ä½œç”¨ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> subscription <span class="token operator">=</span> props<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Clean up the subscription</span>
    subscription<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="reacté«˜é˜¶ç»„ä»·"><a href="#reacté«˜é˜¶ç»„ä»·" aria-hidden="true" class="header-anchor">#</a> reacté«˜é˜¶ç»„ä»·</h2> <p>å…·ä½“è€Œè¨€ï¼Œ<strong>é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> EnhancedComponent <span class="token operator">=</span> <span class="token function">higherOrderComponent</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¯¹æ¯”ç»„ä»¶å°†propså±æ€§è½¬å˜æˆUIï¼Œé«˜é˜¶ç»„ä»¶åˆ™æ˜¯å°†ä¸€ä¸ªç»„ä»¶è½¬æ¢æˆå¦ä¸€ä¸ªç»„ä»¶ã€‚
é«˜é˜¶ç»„ä»¶åœ¨Reactç¬¬ä¸‰æ–¹åº“ä¸­å¾ˆå¸¸è§ï¼Œæ¯”å¦‚Reduxçš„<code>connect</code></p> <h2 id="react-router"><a href="#react-router" aria-hidden="true" class="header-anchor">#</a> React-router</h2> <p><img src="https://github.com/Mucheng910/image/blob/master/react-router%E8%BF%87%E7%A8%8B.png?raw=true" alt="å±å¹•å¿«ç…§ 2019-04-23 09.46.43"></p> <h2 id="diffç®—æ³•"><a href="#diffç®—æ³•" aria-hidden="true" class="header-anchor">#</a> diffç®—æ³•</h2> <ul><li><em>æŠŠæ ‘å½¢ç»“æ„æŒ‰ç…§å±‚çº§åˆ†è§£ï¼Œåªæ¯”è¾ƒåŒçº§å…ƒç´ ã€‚</em></li> <li><em>ç»™åˆ—è¡¨ç»“æ„çš„æ¯ä¸ªå•å…ƒæ·»åŠ å”¯ä¸€çš„ key å±æ€§ï¼Œæ–¹ä¾¿æ¯”è¾ƒã€‚</em></li> <li><em>React åªä¼šåŒ¹é…ç›¸åŒ class çš„ componentï¼ˆè¿™é‡Œé¢çš„ class æŒ‡çš„æ˜¯ç»„ä»¶çš„åå­—ï¼‰</em></li> <li><em>åˆå¹¶æ“ä½œï¼Œè°ƒç”¨ component çš„ setState æ–¹æ³•çš„æ—¶å€™, React å°†å…¶æ ‡è®°ä¸º dirty.åˆ°æ¯ä¸€ä¸ªäº‹ä»¶å¾ªç¯ç»“æŸ, React æ£€æŸ¥æ‰€æœ‰æ ‡è®° dirty çš„ component é‡æ–°ç»˜åˆ¶.</em></li></ul> <h2 id="react-css-æ ·å¼"><a href="#react-css-æ ·å¼" aria-hidden="true" class="header-anchor">#</a> react css æ ·å¼</h2> <ul><li><p>css as object</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> divStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
  color<span class="token punctuation">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span>
  fontSize<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  WebkitTransition<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
  msTransition<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">HelloWorldComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>divStyle<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç¼ºç‚¹ï¼š</p> <ul><li>æ ·å¼å±æ€§åç§°çš„å‘½åæ–¹å¼ä¸ä¼ ç»Ÿ CSS ä¸åŒ</li> <li>æ ·å¼å±æ€§åç§°æ— æ³•è‡ªåŠ¨æç¤ºå¹¶è¡¥å…¨</li> <li>æ ·å¼å€¼ç•¥æœ‰å·®å¼‚ï¼Œå¦‚ä¸Šä¾‹ä¸­çš„å­—ä½“å¤§å° <code>20px</code> å†™ä¸º <code>20</code></li> <li>æ— æ³•å……åˆ†åˆ©ç”¨è‡ªåŠ¨è¡¥å…¨æµè§ˆå™¨å‰ç¼€çš„åŠŸèƒ½ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ å‰ç¼€</li> <li>æ— æ³•æŠ½ç¦»æˆç‹¬ç«‹çš„æ ·å¼æ–‡ä»¶</li> <li>æ— æ³•æœ‰æ•ˆå¤ç”¨åŸºç¡€æ ·å¼</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/FDMap/WX.html" class="prev">å¾®ä¿¡å°ç¨‹åº</a></span> <span class="next"><a href="/FDMap/redux.html">Redux ç³»åˆ—</a>â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.08e121f0.js" defer></script><script src="/assets/js/2.9b2c206e.js" defer></script><script src="/assets/js/14.379d5681.js" defer></script>
  </body>
</html>
