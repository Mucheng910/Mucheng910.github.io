<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é¢å‘å¯¹è±¡ | ä¸ªäººä¸»é¡µ</title>
    <meta name="description" content="ğŸ™…â€â™€ ï¸">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
  <link rel="apple-touch-icon" href="/images/photo.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.019fe3db.css" as="style"><link rel="preload" href="/assets/js/app.08e121f0.js" as="script"><link rel="preload" href="/assets/js/2.9b2c206e.js" as="script"><link rel="preload" href="/assets/js/22.21efee47.js" as="script"><link rel="prefetch" href="/assets/js/10.9d85fd93.js"><link rel="prefetch" href="/assets/js/11.f3dbfea6.js"><link rel="prefetch" href="/assets/js/12.d6f42a33.js"><link rel="prefetch" href="/assets/js/13.0c7a6aab.js"><link rel="prefetch" href="/assets/js/14.379d5681.js"><link rel="prefetch" href="/assets/js/15.a795006f.js"><link rel="prefetch" href="/assets/js/16.d65d283d.js"><link rel="prefetch" href="/assets/js/17.265fbf75.js"><link rel="prefetch" href="/assets/js/18.730f1630.js"><link rel="prefetch" href="/assets/js/19.905bc299.js"><link rel="prefetch" href="/assets/js/20.7046d84e.js"><link rel="prefetch" href="/assets/js/21.abf3fa17.js"><link rel="prefetch" href="/assets/js/23.7eb77dc1.js"><link rel="prefetch" href="/assets/js/24.f5af4b3a.js"><link rel="prefetch" href="/assets/js/25.cbde6c41.js"><link rel="prefetch" href="/assets/js/26.fdacd15c.js"><link rel="prefetch" href="/assets/js/3.b6959132.js"><link rel="prefetch" href="/assets/js/4.1ff495fc.js"><link rel="prefetch" href="/assets/js/5.9aadbdc1.js"><link rel="prefetch" href="/assets/js/6.c092145a.js"><link rel="prefetch" href="/assets/js/7.70cfcfc9.js"><link rel="prefetch" href="/assets/js/8.b55986c0.js"><link rel="prefetch" href="/assets/js/9.a9a34424.js">
    <link rel="stylesheet" href="/assets/css/0.styles.019fe3db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ä¸ªäººä¸»é¡µ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/FDMap/" class="nav-link">å‰ç«¯åŸºç¡€</a></div><div class="nav-item"><a href="/liCoding/" class="nav-link">æ‰‹æ’•ä»£ç </a></div><div class="nav-item"><a href="/FDModule/" class="nav-link router-link-exact-active router-link-active">è®¾è®¡æ¨¡å¼</a></div><div class="nav-item"><a href="https://github.com/Mucheng910" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/FDMap/" class="nav-link">å‰ç«¯åŸºç¡€</a></div><div class="nav-item"><a href="/liCoding/" class="nav-link">æ‰‹æ’•ä»£ç </a></div><div class="nav-item"><a href="/FDModule/" class="nav-link router-link-exact-active router-link-active">è®¾è®¡æ¨¡å¼</a></div><div class="nav-item"><a href="https://github.com/Mucheng910" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>è®¾è®¡æ¨¡å¼</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FDModule/" class="active sidebar-link">é¢å‘å¯¹è±¡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FDModule/#è®¾è®¡æ¨¡å¼" class="sidebar-link">è®¾è®¡æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/FDModule/#è®¾è®¡åŸåˆ™" class="sidebar-link">è®¾è®¡åŸåˆ™</a></li><li class="sidebar-sub-header"><a href="/FDModule/#å·¥å‚æ¨¡å¼" class="sidebar-link">å·¥å‚æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/FDModule/#å•ä¾‹æ¨¡å¼" class="sidebar-link">å•ä¾‹æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/FDModule/#é€‚é…å™¨æ¨¡å¼" class="sidebar-link">é€‚é…å™¨æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/FDModule/#è£…é¥°å™¨æ¨¡å¼" class="sidebar-link">è£…é¥°å™¨æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/FDModule/#ä»£ç†æ¨¡å¼" class="sidebar-link">ä»£ç†æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/FDModule/#ç­–ç•¥æ¨¡å¼" class="sidebar-link">ç­–ç•¥æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/FDModule/#è§‚å¯Ÿè€…æ¨¡" class="sidebar-link">è§‚å¯Ÿè€…æ¨¡</a></li><li class="sidebar-sub-header"><a href="/FDModule/#å‘å¸ƒè®¢é˜…æ¨¡å¼" class="sidebar-link">å‘å¸ƒè®¢é˜…æ¨¡å¼</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" aria-hidden="true" class="header-anchor">#</a> é¢å‘å¯¹è±¡</h1> <p>é¢å‘å¯¹è±¡ä¸‰è¦ç´ ï¼šç»§æ‰¿ï¼Œå°è£…ï¼Œå¤šæ€ã€‚</p> <ul><li>ç»§æ‰¿ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼ˆReactç»„ä»¶é—´ï¼‰</li> <li>å°è£…ï¼šæ•°æ®çš„æƒé™å’Œä¿å¯†ï¼ˆTsï¼‰
<ul><li>tsè¯­æ³•ï¼š[publicï¼šå®Œå…¨å¼€æ”¾ï¼Œprotectedï¼šå¯¹å­ç±»å¼€æ”¾ï¼Œprivateï¼šå¯¹è‡ªå·±å¼€æ”¾]</li> <li>å‡å°‘è€¦åˆï¼Œä¸è¯¥å¤–éœ²çš„ä¸å¤–éœ²</li> <li>åˆ©äºæ•°æ®ï¼Œæ¥å£çš„æƒé™ç®¡è·¯</li> <li>ES6ç›®å‰ä¸æ”¯æŒï¼Œä¸€èˆ¬ï¼Œ_å¼€å¤´ä¸ºprivateç§æœ‰å±æ€§</li></ul></li> <li>å¤šæ€ï¼š
<ul><li>åŒä¸€æ¥å£çš„ä¸åŒå®ç°</li> <li>jsåº”ç”¨å°‘</li> <li>éœ€è¦ç»“åˆjavaç­‰è¯­è¨€çš„æ¥å£ï¼Œé‡å†™ï¼Œé‡è½½ç­‰åŠŸèƒ½</li></ul></li></ul> <h2 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" aria-hidden="true" class="header-anchor">#</a> è®¾è®¡æ¨¡å¼</h2> <h2 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" aria-hidden="true" class="header-anchor">#</a> è®¾è®¡åŸåˆ™</h2> <ul><li>å•ä¸€èŒè´£ S
ä¸€ä¸ªç¨‹åºåªåšä¸€ä»¶äº‹ï¼Œå¦‚æœåŠŸèƒ½è¿‡äºå¤æ‚å°±åˆ†å¼€ï¼Œæ¯ä¸ªéƒ¨åˆ†ä¿æŒç‹¬ç«‹</li> <li>å¼€æ”¾å°é—­ O
å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ï¼ˆå¢åŠ éœ€æ±‚æ—¶ï¼Œæ‰©å±•æ–°ä»£ç ï¼Œè€Œéä¿®æ”¹å·²æœ‰çš„ä»£ç ï¼‰</li> <li>ææ°ç½®æ¢ L
å­ç±»èƒ½è¦†ç›–çˆ¶ç±»ï¼Œçˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹å­ç±»å°±èƒ½å‡ºç°</li> <li>æ¥å£ç‹¬ç«‹ I</li> <li>ä¾èµ–å€’ç½® D
é¢å‘æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œéå…·ä½“ï¼Œåªå…³æ³¨æ¥å£è€Œä¸å…³æ³¨å…·ä½“ç±»çš„å®ç°</li></ul> <h2 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" aria-hidden="true" class="header-anchor">#</a> å·¥å‚æ¨¡å¼</h2> <ul><li>ä½¿ç”¨ï¼šnew æ“ä½œï¼ŒjQueryçš„<code>$('div')</code>é€‰æ‹©å™¨ï¼Œ React.createElement, Vue å¼‚æ­¥ç»„ä»¶
egï¼š<code>React.createElement</code></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> profile <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>abc.png<span class="token punctuation">'</span></span> <span class="token attr-name">classname</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>profile<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>img</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token punctuation">[</span>user<span class="token punctuation">.</span>firstName<span class="token punctuation">,</span>user<span class="token punctuation">,</span>lastName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> profile <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>
     React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>src<span class="token punctuation">:</span><span class="token string">'abc.png'</span><span class="token punctuation">,</span>className<span class="token punctuation">:</span><span class="token string">'profile'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h3'</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">[</span>user<span class="token punctuation">.</span>firstName<span class="token punctuation">,</span>user<span class="token punctuation">,</span>lastName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vnode</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span>attrs<span class="token punctuation">,</span>childer<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//å†…éƒ¨å®ç°è™šæ‹Ÿdom</span>
<span class="token punctuation">}</span>
React<span class="token punctuation">.</span><span class="token function-variable function">createElement</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span>attrs<span class="token punctuation">,</span>childer</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//çœç•¥ä¸€ä¸‹åˆ¤æ–­...</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Vnode</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span>attrs<span class="token punctuation">,</span>childer<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//å·¥å‚æ¨¡å¼</span>
<span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token punctuation">}</span>
    <span class="token function">ini</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'init'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn1'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Creator</span> <span class="token punctuation">{</span>
    <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> create <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Creator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p <span class="token operator">=</span> create<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">ini</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" aria-hidden="true" class="header-anchor">#</a> å•ä¾‹æ¨¡å¼</h2> <p>egï¼šç™»å½•æ¡†ï¼Œè´­ç‰©è½¦ï¼Œvuexå’Œredux çš„storeè·å–çš„æ•°æ®éƒ½æ˜¯ä¸€æ ·çš„</p> <ul><li>éœ€è¦ç”¨åˆ°Javaçš„ç‰¹æ€§ï¼ˆprivateï¼‰</li></ul> <p>å•ä¾‹æ¨¡å¼å®šä¹‰ï¼šä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›è®¿é—®æ­¤å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Singleton</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Singleton<span class="token punctuation">.</span>getInstance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç”±äºes6æ²¡æœ‰é™æ€ç±»å‹,æ•…é—­åŒ…: å‡½æ•°å¤–éƒ¨æ— æ³•è®¿é—® instance</span>
  <span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ£€æŸ¥æ˜¯å¦å­˜åœ¨å®ä¾‹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s1 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" aria-hidden="true" class="header-anchor">#</a> é€‚é…å™¨æ¨¡å¼</h2> <p>åº”ç”¨ï¼šVue è®¡ç®—å±æ€§<code>computed</code>
å°è£…æ—§æ¥å£</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//æ›¿æ¢  $.ajax() ä¸º ajax()</span>
<span class="token keyword">var</span> $ <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">ajax</span><span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">ajax</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Adaptee</span> <span class="token punctuation">{</span>
    <span class="token function">specificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'å¾·å›½æ’å¤´'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Target</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>adaptee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Adaptee</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>adaptee<span class="token punctuation">.</span><span class="token function">specificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>info<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-è½¬æ¢å™¨</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Target</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
</code></pre></div><h2 id="è£…é¥°å™¨æ¨¡å¼"><a href="#è£…é¥°å™¨æ¨¡å¼" aria-hidden="true" class="header-anchor">#</a> è£…é¥°å™¨æ¨¡å¼</h2> <ul><li>ä¸ºå¯¹è±¡æ·»åŠ æ–°åŠŸèƒ½</li> <li>ä¸æ”¹å˜å…¶åŸæœ‰çš„ç»“æ„å’ŒåŠŸèƒ½</li></ul> <p>ES7 è£…é¥°å™¨</p> <div class="language-js extra-class"><pre class="language-js"><code>
</code></pre></div><h2 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" aria-hidden="true" class="header-anchor">#</a> ä»£ç†æ¨¡å¼</h2> <p>ç¿»å¢™</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç»çºªäººæ˜æ˜Ÿ</span>
<span class="token keyword">let</span> star <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'ql'</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    phone<span class="token punctuation">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span>
    price<span class="token punctuation">:</span> <span class="token number">100000</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> agent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>star<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'phone'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log('abc')</span>
            <span class="token keyword">return</span> <span class="token string">'abc'</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'price'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(target.price)</span>
            <span class="token keyword">return</span> target<span class="token punctuation">.</span>price
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'customPrice'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span><span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'low'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span>val
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>agent<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>agent<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>agent<span class="token punctuation">.</span>phone<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>agent<span class="token punctuation">.</span>price<span class="token punctuation">)</span>

agent<span class="token punctuation">.</span>customPrice <span class="token operator">=</span> <span class="token number">300000</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>agent<span class="token punctuation">.</span>customPrice<span class="token punctuation">,</span><span class="token string">'agent.customPrice'</span><span class="token punctuation">)</span>


<span class="token comment">// æ˜æ˜Ÿ</span>
<span class="token comment">// let star = {</span>
<span class="token comment">//     name: 'å¼ XX',</span>
<span class="token comment">//     age: 25,</span>
<span class="token comment">//     phone: '13910733521'</span>
<span class="token comment">// }</span>
<span class="token comment">//</span>
<span class="token comment">// // ç»çºªäºº</span>
<span class="token comment">// let agent = new Proxy(star, {</span>
<span class="token comment">//     get: function (target, key) {</span>
<span class="token comment">//         if (key === 'phone') {</span>
<span class="token comment">//             // è¿”å›ç»çºªäººè‡ªå·±çš„æ‰‹æœºå·</span>
<span class="token comment">//             return '18611112222'</span>
<span class="token comment">//         }</span>
<span class="token comment">//         if (key === 'price') {</span>
<span class="token comment">//             // æ˜æ˜Ÿä¸æŠ¥ä»·ï¼Œç»çºªäººæŠ¥ä»·</span>
<span class="token comment">//             return 120000</span>
<span class="token comment">//         }</span>
<span class="token comment">//         return target[key]</span>
<span class="token comment">//     },</span>
<span class="token comment">//     set: function (target, key, val) {</span>
<span class="token comment">//         if (key === 'customPrice') {</span>
<span class="token comment">//             if (val &lt; 100000) {</span>
<span class="token comment">//                 // æœ€ä½ 10w</span>
<span class="token comment">//                 throw new Error('ä»·æ ¼å¤ªä½')</span>
<span class="token comment">//             } else {</span>
<span class="token comment">//                 target[key] = val</span>
<span class="token comment">//                 return true</span>
<span class="token comment">//             }</span>
<span class="token comment">//         }</span>
<span class="token comment">//     }</span>
<span class="token comment">// })</span>
<span class="token comment">//</span>
<span class="token comment">// // ä¸»åŠæ–¹</span>
<span class="token comment">// console.log(agent.name)</span>
<span class="token comment">// console.log(agent.age)</span>
<span class="token comment">// console.log(agent.phone)</span>
<span class="token comment">// console.log(agent.price)</span>
<span class="token comment">//</span>
<span class="token comment">// // æƒ³è‡ªå·±æä¾›æŠ¥ä»·ï¼ˆç ä»·ï¼Œæˆ–è€…é«˜ä»·äº‰æŠ¢ï¼‰</span>
<span class="token comment">// agent.customPrice = 150000</span>
<span class="token comment">// // agent.customPrice = 90000  // æŠ¥é”™ï¼šä»·æ ¼å¤ªä½</span>
<span class="token comment">// console.log('customPrice', agent.customPrice)</span>
</code></pre></div><h2 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" aria-hidden="true" class="header-anchor">#</a> ç­–ç•¥æ¨¡å¼</h2> <ul><li>å°±æ˜¯èƒ½å¤ŸæŠŠä¸€ç³»åˆ—â€œå¯äº’æ¢çš„â€ç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶æ ¹æ®ç”¨æˆ·éœ€æ±‚æ¥é€‰æ‹©å…¶ä¸­ä¸€ç§ã€‚</li> <li><strong>ç­–ç•¥æ¨¡å¼å®ç°çš„æ ¸å¿ƒ</strong>å°±æ˜¯ï¼šå°†ç®—æ³•çš„ä½¿ç”¨å’Œç®—æ³•çš„å®ç°åˆ†ç¦»ã€‚ç®—æ³•çš„å®ç°äº¤ç»™ç­–ç•¥ç±»ã€‚ç®—æ³•çš„ä½¿ç”¨äº¤ç»™ç¯å¢ƒç±»ï¼Œç¯å¢ƒç±»ä¼šæ ¹æ®ä¸åŒçš„æƒ…å†µé€‰æ‹©åˆé€‚çš„ç®—æ³•ã€‚</li> <li><strong>ç­–ç•¥æ¨¡å¼ä¼˜ç¼ºç‚¹</strong> åœ¨ä½¿ç”¨ç­–ç•¥æ¨¡å¼çš„æ—¶å€™ï¼Œéœ€è¦äº†è§£æ‰€æœ‰çš„â€œç­–ç•¥â€ï¼ˆstrategyï¼‰ä¹‹é—´çš„å¼‚åŒç‚¹ï¼Œæ‰èƒ½é€‰æ‹©åˆé€‚çš„â€œç­–ç•¥â€è¿›è¡Œè°ƒç”¨ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç­–ç•¥ç±»</span>
<span class="token keyword">const</span> strategies <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;This is stragegy A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;This is stragegy B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ç¯å¢ƒç±»</span>
<span class="token keyword">const</span> <span class="token function-variable function">context</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> strategies<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// è°ƒç”¨ç­–ç•¥A</span>
<span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è°ƒç”¨ç­–ç•¥B</span>
<span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="è§‚å¯Ÿè€…æ¨¡"><a href="#è§‚å¯Ÿè€…æ¨¡" aria-hidden="true" class="header-anchor">#</a> è§‚å¯Ÿè€…æ¨¡</h2> <p>å‘å¸ƒè®¢é˜…ã€ä¸€å¯¹å¤š
åœºæ™¯ï¼š</p> <ul><li>ç½‘é¡µäº‹ä»¶ç»‘å®š</li> <li>promise</li> <li>Jquery callbacks</li> <li>node.jsçš„è‡ªå®šä¹‰äº‹ä»¶</li></ul> <h2 id="å‘å¸ƒè®¢é˜…æ¨¡å¼"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼" aria-hidden="true" class="header-anchor">#</a> å‘å¸ƒè®¢é˜…æ¨¡å¼</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Event <span class="token operator">=</span> <span class="token punctuation">{</span>
  clientList<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ç»‘å®šäº‹ä»¶ç›‘å¬</span>
  <span class="token function">listen</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// è§¦å‘å¯¹åº”äº‹ä»¶</span>
  <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>
      fns <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>fns <span class="token operator">||</span> fns<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> fn <span class="token keyword">of</span> fns<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// ç§»é™¤ç›¸å…³äº‹ä»¶</span>
  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> fns <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// å¦‚æœä¹‹å‰æ²¡æœ‰ç»‘å®šäº‹ä»¶</span>
    <span class="token comment">// æˆ–è€…æ²¡æœ‰æŒ‡æ˜è¦ç§»é™¤çš„äº‹ä»¶</span>
    <span class="token comment">// ç›´æ¥è¿”å›</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>fns <span class="token operator">||</span> <span class="token operator">!</span>fn<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// åå‘éå†ç§»é™¤ç½®æŒ‡å®šäº‹ä»¶å‡½æ•°</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> l <span class="token operator">=</span> fns<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> l <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> l<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> _fn <span class="token operator">=</span> fns<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>_fn <span class="token operator">===</span> fn<span class="token punctuation">)</span><span class="token punctuation">{</span>
        fns<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¸ºå¯¹è±¡åŠ¨æ€å®‰è£… å‘å¸ƒ-è®¢é˜… åŠŸèƒ½</span>
<span class="token keyword">const</span> <span class="token function-variable function">installEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> Event<span class="token punctuation">)</span><span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> Event<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> salesOffices <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">installEvent</span><span class="token punctuation">(</span>salesOffices<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶å’Œå›è°ƒå‡½æ•°</span>

salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">&quot;event01&quot;</span><span class="token punctuation">,</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Price is&quot;</span><span class="token punctuation">,</span> price<span class="token punctuation">,</span> <span class="token string">&quot;at event01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">&quot;event02&quot;</span><span class="token punctuation">,</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Price is&quot;</span><span class="token punctuation">,</span> price<span class="token punctuation">,</span> <span class="token string">&quot;at event02&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&quot;event01&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&quot;event02&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

salesOffices<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;event01&quot;</span><span class="token punctuation">,</span> fn1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡º: false</span>
<span class="token comment">// è¯´æ˜åˆ é™¤æˆåŠŸ</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&quot;event01&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token keyword">class</span> <span class="token class-name">EventEmeitter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å‚¨å­˜äº‹ä»¶/å›è°ƒé”®å€¼å¯¹</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_maxListeners <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_maxListeners <span class="token operator">||</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç«‹ç›‘å¬ä¸Šé™</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// è§¦å‘åä¸ºtypeçš„äº‹ä»¶</span>
<span class="token class-name">EventEmeitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">emit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> handler<span class="token punctuation">;</span>
  <span class="token comment">// ä»å‚¨å­˜äº‹ä»¶é”®å€¼å¯¹çš„this._eventsä¸­è·å–å¯¹åº”äº‹ä»¶å›è°ƒå‡½æ•°</span>
  handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ç›‘å¬åä¸ºtypeçš„äº‹ä»¶</span>
<span class="token class-name">EventEmeitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addListener</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å°†typeäº‹ä»¶ä»¥åŠå¯¹åº”çš„fnå‡½æ•°æ”¾å…¥this._eventsä¸­å‚¨å­˜</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>



</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.08e121f0.js" defer></script><script src="/assets/js/2.9b2c206e.js" defer></script><script src="/assets/js/22.21efee47.js" defer></script>
  </body>
</html>
